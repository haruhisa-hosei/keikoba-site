/* =========================================================
   Winter index styles (images rule)
   - Common images live in:   images/
   - Winter-only images live in: images/winter/
   ========================================================= */

/* 基本設定 */
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: 'Zen Old Mincho', serif;
  background-color: #f4f1e8;
  overflow: hidden;
}

.main-link-container {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  text-decoration: none;
  color: inherit;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  z-index: 2; /* always above winter layers */
}

.content-wrapper {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  flex-direction: row-reverse;
  align-items: center;
  justify-content: center;
  width: 80%;
  max-width: 1000px;
}

/* 画像ラッパー */
.phoenix-wrapper {
  position: relative;
  width: 50%;
  max-width: 500px;
  aspect-ratio: 4 / 3;
  margin-left: -50px;
  transform-origin: center center;
}

.phoenix-image {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: auto;
  backface-visibility: hidden;
}

/* 画像1: phoenix.png */
.img-1 { opacity: 1; z-index: 2; }
/* 画像2: phoenix2.png */
.img-2 { opacity: 0; z-index: 1; }

.title-area { writing-mode: vertical-rl; z-index: 1; }

h1 {
  font-size: clamp(2.5rem, 6vw, 5rem);
  letter-spacing: 0.5em;
  margin: 0;
  font-weight: 500;
  line-height: 1.5;
  color: #1a2a40;
  text-shadow:
    1px 1px 2px rgba(255,255,255,0.6),
    -1px 1px 2px rgba(255,255,255,0.6),
    1px -1px 2px rgba(255,255,255,0.6),
    -1px -1px 2px rgba(255,255,255,0.6);
}

/* アニメーション */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to   { opacity: 1; transform: translateY(0); }
}
.fade-in { opacity: 0; animation: fadeIn 2.1s ease-out forwards; }
.fade-in-title { opacity: 0; animation: fadeIn 2.1s ease-out 0.5s forwards; }

/* 飛び去る動き */
@keyframes flyMove {
  0%   { transform: translateY(0) scale(1); opacity: 1; }
  100% { transform: translate(-250px, -300px) scale(0.6); opacity: 0; }
}

/* 羽ばたき画像切り替え */
@keyframes flap-img1 { 0%, 49% { opacity: 1; } 50%, 100% { opacity: 0; } }
@keyframes flap-img2 { 0%, 49% { opacity: 0; } 50%, 100% { opacity: 1; } }

/* クラス付与時 */
.is-flying { animation: flyMove 1.2s ease-in forwards !important; }
.is-flying .img-1 { animation: flap-img1 0.2s steps(1) infinite; }
.is-flying .img-2 { animation: flap-img2 0.2s steps(1) infinite; }
.is-fading-out { transition: opacity 0.5s ease; opacity: 0 !important; }

@media (max-width: 768px) {
  .content-wrapper { flex-direction: column; width: 90%; }
  .title-area { writing-mode: horizontal-tb; margin-top: 20px; }
  .phoenix-wrapper { width: 70%; margin-left: 0; }
  h1 { font-size: 2rem; letter-spacing: 0.2em; }
}

/* ===== 冬：背景うっすら重ね（生成りは残す） ===== */
#winterOverlay{
  position: fixed;
  inset: 0;
  z-index: 0;              /* 生成り背景の上、本文の下 */
  pointer-events: none;
  background: url("../images/winter/keikoba_winter_bk.jpg") center bottom / cover no-repeat;
  opacity: 0.7;
  filter: brightness(0.78) contrast(1.15);
}

/* ===== 冬：雪チラつき（白点PNGを重ねて点滅） ===== */
#snowFlicker{
  position: fixed;
  inset: 0;
  z-index: 1;
  pointer-events: none;
  filter: contrast(1.12);
}

#snowFlicker .snow{
  position: absolute;
  inset: 0;
  background-repeat: repeat;
  background-size: 900px 900px;
  opacity: 0;
  mix-blend-mode: normal;
  animation-timing-function: steps(1);
  transform: translateZ(0);
  will-change: opacity;
  background-position: 0 -300px;
}

.snow-t1{ background-image:url("../images/winter/white_dots_transparent_1.png"); animation:f1 2.8s infinite; }
.snow-t2{ background-image:url("../images/winter/white_dots_transparent_2.png"); animation:f2 3.2s infinite; }
.snow-w { background-image:url("../images/winter/white_dots_density_weak.png");  animation:f3 4.2s infinite; }
.snow-m { background-image:url("../images/winter/white_dots_density_medium.png");animation:f4 3.6s infinite; }
.snow-s { background-image:url("../images/winter/white_dots_density_strong.png");animation:f5 8.0s infinite; }

@keyframes f1{0%{opacity:.04}30%{opacity:.16}55%{opacity:.05}75%{opacity:.18}100%{opacity:.07}}
@keyframes f2{0%{opacity:.10}18%{opacity:.03}48%{opacity:.14}72%{opacity:.04}100%{opacity:.09}}
@keyframes f3{0%{opacity:.05}35%{opacity:.11}65%{opacity:.04}100%{opacity:.06}}
@keyframes f4{0%{opacity:0}40%{opacity:.10}70%{opacity:.03}100%{opacity:.05}}
@keyframes f5{0%{opacity:0}74%{opacity:0}78%{opacity:.08}82%{opacity:0}92%{opacity:.06}100%{opacity:0}}

/* ===== 冬：雪 落下レイヤー（別系統） ===== */
#snowFallLayer{
  position: fixed;
  inset: 0;
  z-index: 1;
  pointer-events: none;
  overflow: hidden;
}

#snowFallLayer .fall{
  position: absolute;
  inset: 0;
  background-image: url("../images/winter/white_dots_density_medium.png");
  background-repeat: repeat;
  background-size: 900px 900px;
  opacity: 0.0;
  filter: brightness(1.25) contrast(1.15);
  animation: snowFallMove 22s linear infinite;
}

/* 4層：100pxずつ下にずらす */
#snowFallLayer .l1{ transform: translateY(0px);   animation-delay: 0s; }
#snowFallLayer .l2{ transform: translateY(100px); animation-delay: 5.5s; }
#snowFallLayer .l3{ transform: translateY(200px); animation-delay: 11s; }
#snowFallLayer .l4{ transform: translateY(300px); animation-delay: 16.5s; }

@keyframes snowFallMove{
  0%   { background-position: 0 -300px; opacity: 0.04; }
  30%  { opacity: 0.10; }
  60%  { opacity: 0.18; }
  100% { background-position: 0 700px; opacity: 0.26; }
}
